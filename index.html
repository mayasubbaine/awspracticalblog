<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Static Website Hosting Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc;
            color: #2d3748;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
        }
        .step-header {
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            background-color: #f0f4f8;
            border-radius: 0.75rem;
        }
        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 0 1.5rem;
        }
        .step-content.active {
            max-height: 1200px;
            padding: 1.5rem;
            border: 1px solid #e2e8f0;
        }
        .step-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .svg-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .svg-component {
            cursor: pointer;
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .svg-component:hover {
            filter: drop-shadow(0 0 5px rgba(66, 153, 225, 0.5));
            transform: scale(1.05);
        }
        .svg-component.active {
            filter: drop-shadow(0 0 8px #4299e1);
            transform: scale(1.1);
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div class="container">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-bold text-gray-800 mb-2">AWS Static Website Hosting Guide</h1>
            <p class="text-gray-600 text-lg">A simple, step-by-step walkthrough to deploy your static website on AWS.</p>
        </header>

        <!-- Interactive Architecture Diagram -->
        <div class="step-card p-6 mb-8">
            <h2 class="text-2xl font-semibold text-gray-700 mb-4 text-center">Interactive Architecture Diagram</h2>
            <div class="svg-container mb-6">
                <svg width="100%" height="250" viewBox="0 0 600 250" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- User -->
                    <rect id="user-box" class="svg-component" x="20" y="80" width="100" height="70" rx="10" ry="10" fill="#E2E8F0" stroke="#4A5568" stroke-width="2"/>
                    <text x="70" y="120" font-family="Inter, sans-serif" font-size="14" font-weight="600" text-anchor="middle" fill="#2D3748">User</text>
                    
                    <!-- Arrow 1: User to CloudFront -->
                    <line x1="120" y1="115" x2="210" y2="115" stroke="#4A5568" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="165" y="105" font-family="Inter, sans-serif" font-size="12" text-anchor="middle" fill="#4A5568">Request</text>

                    <!-- CloudFront -->
                    <rect id="cloudfront-box" class="svg-component" x="210" y="60" width="120" height="110" rx="10" ry="10" fill="#C4E0F9" stroke="#3182CE" stroke-width="2"/>
                    <text x="270" y="115" font-family="Inter, sans-serif" font-size="14" font-weight="600" text-anchor="middle" fill="#2D3748">CloudFront</text>
                    <text x="270" y="135" font-family="Inter, sans-serif" font-size="10" text-anchor="middle" fill="#2D3748">Edge Location</text>

                    <!-- Arrow 2: CloudFront to S3 -->
                    <line x1="330" y1="115" x2="420" y2="115" stroke="#4A5568" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="375" y="105" font-family="Inter, sans-serif" font-size="12" text-anchor="middle" fill="#4A5568">Fetch (if not cached)</text>

                    <!-- S3 Bucket -->
                    <rect id="s3-box" class="svg-component" x="420" y="80" width="120" height="70" rx="10" ry="10" fill="#E2F0F7" stroke="#319795" stroke-width="2"/>
                    <text x="480" y="120" font-family="Inter, sans-serif" font-size="14" font-weight="600" text-anchor="middle" fill="#2D3748">S3 Bucket</text>
                    
                    <!-- Arrow 3: S3 to CloudFront -->
                    <line x1="540" y1="115" x2="330" y2="115" stroke="#4A5568" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="435" y="125" font-family="Inter, sans-serif" font-size="12" text-anchor="middle" fill="#4A5568">Secure Read via OAC</text>

                    <!-- OAC -->
                    <circle id="oac-box" class="svg-component" cx="375" cy="180" r="25" fill="#FEEBCB" stroke="#DD6B20" stroke-width="2"/>
                    <text x="375" y="185" font-family="Inter, sans-serif" font-size="12" font-weight="600" text-anchor="middle" fill="#2D3748">OAC</text>
                </svg>
            </div>
            <div id="diagram-description" class="p-4 bg-gray-100 rounded-lg text-sm text-gray-700 transition-opacity duration-300">
                Click on any component in the diagram to learn more about its role in the architecture.
            </div>
        </div>

        <!-- Step 1: Prepare Your S3 Bucket -->
        <div class="step-card mb-6">
            <div id="step1-header" class="step-header p-6 flex justify-between items-center">
                <h2 class="text-xl font-semibold text-gray-700">Step 1: Configure Your S3 Bucket</h2>
                <svg id="step1-icon" class="w-6 h-6 text-gray-500 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <div id="step1-content" class="step-content">
                <p class="mb-4">This initial step involves creating a storage repository for your website's content and ensuring it is configured for secure access.</p>
                <ul class="list-disc pl-5 space-y-4">
                    <li>
                        <strong class="font-bold">Create an S3 Bucket:</strong> Navigate to the AWS Management Console and select the S3 service. Click on "Create bucket" and provide a globally unique name. Remember to choose the AWS Region that is geographically closest to your primary users for the best performance. 
                    </li>
                    <li>
                        <strong class="font-bold">Upload Your Content:</strong> Upload all the static assets for your website, including HTML, CSS, JavaScript, images, and other media files. You can do this by dragging and dropping files or using the "Upload" button. It's best practice to keep your `index.html` file in the root of the bucket.
                    </li>
                    <li>
                        <strong class="font-bold">Enable Block Public Access:</strong> For enhanced security, it's crucial that your S3 bucket remains private. On the bucket properties page, ensure that "Block all public access" is enabled. This prevents direct public access to your files, with CloudFront later serving as the only public entry point.
                    </li>
                </ul>
            </div>
        </div>

        <!-- Step 2: Create an Origin Access Control (OAC) -->
        <div class="step-card mb-6">
            <div id="step2-header" class="step-header p-6 flex justify-between items-center">
                <h2 class="text-xl font-semibold text-gray-700">Step 2: Establish a Secure Origin Access Control (OAC)</h2>
                <svg id="step2-icon" class="w-6 h-6 text-gray-500 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <div id="step2-content" class="step-content">
                <p class="mb-4">An OAC acts as a trusted intermediary, securely connecting your CloudFront distribution to your private S3 bucket.</p>
                <ul class="list-disc pl-5 space-y-4">
                    <li>
                        <strong class="font-bold">Navigate to CloudFront:</strong> From the AWS Management Console, search for and select the CloudFront service. 
                    </li>
                    <li>
                        <strong class="font-bold">Create a New OAC:</strong> In the left-hand navigation pane, under "Security," select "Origin access." Click "Create control setting."
                    </li>
                    <li>
                        <strong class="font-bold">Configure and Create:</strong>
                        <ul class="list-circle pl-5 mt-2 space-y-2">
                            <li><span class="font-medium">Name:</span> Give your OAC a descriptive name, such as `my-website-oac`.</li>
                            <li><span class="font-medium">Origin type:</span> Ensure "S3" is selected.</li>
                            <li>Once configured, click <span class="font-medium">Create</span>.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-bold">Copy the Policy:</strong> After the OAC is created, a dialog will appear with a generated bucket policy. This policy explicitly grants your CloudFront distribution permission to read files from your private S3 bucket. Click the button to copy this policy to your clipboard.
                        <div class="mt-4 p-4 bg-gray-100 rounded-md text-sm relative">
                            <pre id="policy-text" class="whitespace-pre-wrap font-mono text-gray-600">
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowCloudFrontServicePrincipalReadOnly",
            "Effect": "Allow",
            "Principal": {
                "Service": "cloudfront.amazonaws.com"
            },
            "Action": [
                "s3:GetObject"
            ],
            "Resource": "arn:aws:s3:::your-bucket-name/*",
            "Condition": {
                "StringEquals": {
                    "AWS:SourceArn": "arn:aws:cloudfront::your-account-id:distribution/your-distribution-id"
                }
            }
        }
    ]
}
                            </pre>
                            <button id="copy-button" class="absolute top-2 right-2 px-3 py-1 bg-blue-500 text-white text-xs font-medium rounded-md hover:bg-blue-600 transition-colors duration-200">Copy</button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Step 3: Create the CloudFront Distribution -->
        <div class="step-card mb-6">
            <div id="step3-header" class="step-header p-6 flex justify-between items-center">
                <h2 class="text-xl font-semibold text-gray-700">Step 3: Build Your CloudFront Distribution</h2>
                <svg id="step3-icon" class="w-6 h-6 text-gray-500 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <div id="step3-content" class="step-content">
                <p class="mb-4">This step involves configuring CloudFront to serve your content efficiently from the edge, closer to your users.</p>
                <ul class="list-disc pl-5 space-y-4">
                    <li>
                        <strong class="font-bold">Start a New Distribution:</strong> In the CloudFront console, select "Distributions" from the left-hand menu, then click "Create distribution." 
                    </li>
                    <li>
                        <strong class="font-bold">Configure the Origin:</strong>
                        <ul class="list-circle pl-5 mt-2 space-y-2">
                            <li><span class="font-medium">Origin domain:</span> Select your S3 bucket from the dropdown list.</li>
                            <li><span class="font-medium">Origin access:</span> Choose <span class="font-medium">Origin access control settings (recommended)</span>.</li>
                            <li><span class="font-medium">Origin access control:</span> Select the OAC you created in the previous step.</li>
                            <li><span class="font-medium">Bucket policy:</span> CloudFront will prompt you to update the S3 bucket policy. Click <span class="font-medium">Copy policy</span>, then "Go to S3 bucket permissions." Paste the policy into the "Bucket policy" editor and save. This is the final piece of the secure connection.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-bold">Set Default Cache Behavior:</strong>
                        <ul class="list-circle pl-5 mt-2 space-y-2">
                            <li><span class="font-medium">Viewer protocol policy:</span> Select <span class="font-medium">Redirect HTTP to HTTPS</span> to enforce secure connections.</li>
                            <li><span class="font-medium">Allowed HTTP methods:</span> Choose <span class="font-medium">GET, HEAD</span>, which are sufficient for static content.</li>
                            <li><span class="font-medium">Cache policy:</span> Select <span class="font-medium">CachingOptimized</span>, a managed policy that is pre-configured for high-performance static content delivery.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-bold">Finalize Settings and Create:</strong>
                        <ul class="list-circle pl-5 mt-2 space-y-2">
                            <li><span class="font-medium">Default root object:</span> Set this to your primary file, e.g., `index.html`. This ensures that when a user navigates to your domain, CloudFront serves the correct entry point.</li>
                            <li>Finally, click <span class="font-medium">Create distribution</span> to start the deployment process.</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Step 4: Test Your CloudFront Distribution -->
        <div class="step-card mb-6">
            <div id="step4-header" class="step-header p-6 flex justify-between items-center">
                <h2 class="text-xl font-semibold text-gray-700">Step 4: Validate and Test Your Deployment</h2>
                <svg id="step4-icon" class="w-6 h-6 text-gray-500 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <div id="step4-content" class="step-content">
                <p class="mb-4">With all settings in place, it's time to test your new, secure static website.</p>
                <ul class="list-disc pl-5 space-y-4">
                    <li>
                        <strong class="font-bold">Wait for Deployment:</strong> CloudFront distributions take time to propagate across all edge locations. The status will show as <span class="font-medium">Deploying</span>. It may take several minutes to become `Deployed`.
                    </li>
                    <li>
                        <strong class="font-bold">Retrieve the Domain Name:</strong> Once the status changes to <span class="font-medium">Deployed</span>, locate and copy the <span class="font-medium">Distribution domain name</span> from your list of distributions. It will be a string similar to `d1234abcd.cloudfront.net`. 
                    </li>
                    <li>
                        <strong class="font-bold">Access Your Content:</strong> Paste this domain name into your browser's address bar. You should see your website loaded securely and served from the CloudFront network.
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const steps = [
                { header: 'step1-header', content: 'step1-content', icon: 'step1-icon' },
                { header: 'step2-header', content: 'step2-content', icon: 'step2-icon' },
                { header: 'step3-header', content: 'step3-content', icon: 'step3-icon' },
                { header: 'step4-header', content: 'step4-content', icon: 'step4-icon' }
            ];

            const components = {
                'user-box': 'The end-user accessing your website from a web browser.',
                'cloudfront-box': 'CloudFront is a global Content Delivery Network (CDN) that caches your content at edge locations worldwide, reducing latency and improving performance.',
                's3-box': 'Amazon S3 provides highly durable and scalable object storage for your static website files.',
                'oac-box': 'Origin Access Control is the secure method used by CloudFront to read private content from your S3 bucket, preventing direct public access.'
            };

            const diagramDescription = document.getElementById('diagram-description');

            steps.forEach(step => {
                const header = document.getElementById(step.header);
                const content = document.getElementById(step.content);
                const icon = document.getElementById(step.icon);

                header.addEventListener('click', () => {
                    const isContentActive = content.classList.toggle('active');
                    if (isContentActive) {
                        icon.classList.add('rotate-180');
                        header.classList.remove('rounded-lg');
                        header.classList.add('rounded-t-lg');
                    } else {
                        icon.classList.remove('rotate-180');
                        header.classList.remove('rounded-t-lg');
                        header.classList.add('rounded-lg');
                    }
                });
            });

            document.querySelectorAll('.svg-component').forEach(component => {
                component.addEventListener('click', (e) => {
                    document.querySelectorAll('.svg-component').forEach(comp => comp.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    diagramDescription.textContent = components[e.currentTarget.id];
                });
            });

            // Copy to clipboard functionality
            document.getElementById('copy-button').addEventListener('click', () => {
                const text = document.getElementById('policy-text').innerText;
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);

                const button = document.getElementById('copy-button');
                const originalText = button.innerText;
                button.innerText = 'Copied!';
                setTimeout(() => {
                    button.innerText = originalText;
                }, 2000);
            });
        });
    </script>
</body>
</html>
